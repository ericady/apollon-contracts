# # Custom

# Singleton entity to store the ID of the last created Token

type Token @entity {
  id: Bytes!
  address: Bytes! # contract address
  symbol: String!
  createdAt: BigInt!
  #
  priceUSD: BigInt!
  # TODO: Fetch this from the client side and get it from the TradingView entities
  # priceUSD24hAgo: BigInt!
  #
  isPoolToken: Boolean!
}

type DebtTokenMeta @entity(immutable: true) {
  id: Bytes!
  token: Token! @relation(name: "TokenToDebtTokenMeta")
  timestamp: BigInt!

  # global
  stabilityDepositAPY: BigInt!
  totalDepositedStability: BigInt!
  totalReserve: BigInt!
  # TODO: Fetch this from the client side
  # totalReserve24hAgo: BigInt!
  totalSupplyUSD: BigInt!
  # TODO: Fetch this from the client side
  # totalSupplyUSD24hAgo: BigInt!
}

type UserDebtTokenMeta @entity {
  # "UserDebtTokenMeta" + token + borrower
  id: String!
  borrower: Bytes!
  token: Token! @relation(name: "TokenToUserDebtTokenMeta")

  walletAmount: BigInt!
  troveMintedAmount: BigInt!
  # When user claims rewards set to deposit => track any increase/decrease but claimed stability
  providedStablitySinceLastCollClaim: BigInt!
  stabilityCompoundAmount: BigInt!
}
